<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<header>
</header>
<body>
<script>
    function updateLinkUrl(url,btnId) {
        var loginUVenderIdValue = getCookie('loginVenderId');
        console.log("loginUVenderIdValue:"+loginUVenderIdValue);
        if (loginUVenderIdValue) {
            var likeBtn = document.getElementById(btnId); // ID로 하이퍼링크 요소 가져오기
            likeBtn.href = url + loginUVenderIdValue; // URL을 업데이트
        }
    }

    // 쿠키에서 loginUserIdValue 값을 가져오는 함수 (이미 있는 코드)
    function getCookie(name) {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = cookies[i].trim();
            if (cookie.indexOf(name + '=') === 0) {
                return cookie.substring(name.length + 1, cookie.length);
            }
        }
        return null; // 해당 쿠키가 없을 경우
    }
</script>

<th:block th:fragment="navbarFragment">
    <nav>
        <div class="container">
            <div>
                <ul style="display: flex" class="menu">
                    <li>
                        <a class="navbar-brand" th:href="@{/job_post/jobList}">
                            <img th:src="@{/img/logo/title_header.png}" alt="logo" style="width: 150px;"/>
                        </a>
                    </li>
                    <li><a href="/" class="menuBtn">공고보기</a></li>
                    <li>|</li>
                    <li><a href="#" class="menuBtn">기업정보보기</a></li>
                    <li>|</li>
                    <li><a href="/adviceboard/list" class="menuBtn">커뮤니티</a></li>
                    <li>
                        <div class="search">
                            <a href="#"><i class="fa-solid fa-magnifying-glass"></i></a>
                            <input type="text" placeholder="검색">
                        </div>
                    </li>
                    <li>
                        <a class="logBtn" sec:authorize="isAnonymous()" href="/account/loginpage">로그인</a>
                        <a class="logBtn" sec:authorize="isAuthenticated()" href="#">로그아웃</a>
                        <a href="/userMypage">마이페이지</a>
                        <a href="/adminPage">관리자페이지</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            기업서비스
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="/account/login">로그인</a></li>
                            <li>
                                <a id="jopPostBtn">
                                    <button onclick="updateLinkUrl('/jobPostTemp/vendersTempList/','jopPostBtn')">공고등록</button>
                                </a>
                            </li>
                        </ul>
                    </li>

                </ul>
            </div>
        </div>
    </nav>
</th:block>
</body>
</html>