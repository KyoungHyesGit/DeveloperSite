<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/default_layout">
<meta charset="UTF-8">
<head>
    <link rel="stylesheet" type="text/css" href="/css/loginu.css">
</head>

<th:block layout:fragment="content">

    <body>
    <!--가입성공 메세지-->
    <script th:if="${successMessage}">
        alert("회원가입 완료!");
        // var userName = document.getElementById('u_name').value;
        // var userEmail = document.getElementById('u_email').value;
        // alert(userName+"님 회원가입 완료!\n사용 이메일 : "+userEmail);
    </script>

    <!--로그인 실패 메세지-->
    <script th:if="${loginx}">

        alert("로그인 실패!\n이메일, 비밀번호를 다시 확인하세요!");

    </script>

    <script th:if="${logout}">
        alert("로그아웃 되었습니다");
    </script>

    <!--로그아웃 메세지-->
    <script th:if="${logout}">
        alert("로그아웃 되었습니다");
    </script>

    <h2 class="resumeH2 text-center">일반회원 로그인</h2>
    <div> <!--th:object="${}"-->
        <form id="login" action="/account/login" method="post">
            <input type="text" name="userEmail" placeholder="이메일@aaa" class="in" id="userEmail">
            <input type="password" name="passwd" placeholder="비밀번호" class="in">
            <input type="submit" id="btn" value="로그인"><br>
            <button type="button" onclick="location.href='http://localhost/account/signuppage'">회원가입</button>
        </form>
        <hr>
        <a href="/oauth2/authorization/google">구글 로그인</a>
        <br><br>
    </div>
    </body>
    <script>

        // Function to parse and collect all cookies into an object
        function getAllCookies() {
            var cookies = document.cookie.split('; ');
            var cookieObject = {};

            cookies.forEach(function (cookie) {
                var parts = cookie.split('=');
                var name = parts[0];
                var value = parts[1];
                cookieObject[name] = value;
            });

            return cookieObject;
        }

        // Call the function to get all cookies
        var allCookies = getAllCookies();

        // Now 'allCookies' is an object containing all cookies by name and value
        // You can access individual cookies like this:
        var myTokenCookie = allCookies.myTokenCookie;
        var loginUserId = allCookies.loginUserId;
        var loginVenderId = allCookies.loginVenderId;

        // Use the cookies as needed
        console.log('Value of myTokenCookie:', myTokenCookie);
        console.log('Value of loginUserId:', loginUserId);
        console.log('Value of loginVenderId:', loginVenderId);

        // function setCookie(name, value, days) {
        //     var expires = "";
        //     if (days) {
        //         var date = new Date();
        //         date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        //         expires = "; expires=" + date.toUTCString();
        //     }
        //     document.cookie = name + "=" + value + expires + "; path=/";
        // }
        //
        // // 위의 함수를 호출하여 쿠키를 설정
        // setCookie("myTokenCookie", myToken, 30); // 30은 쿠키의 유효 기간을 나타냅니다. 필요에 따라 조절할 수 있습니다.
    </script>
</th:block>
</html>